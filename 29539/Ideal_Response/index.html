<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Hex Color Code</title>
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@600&display=swap" rel="stylesheet">
  <!-- Stylesheet -->
  <style>
    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
      border: none;
      outline: none;
      font-family: "Roboto Mono", monospace;
    }

    .container {
      background-color: #202229;
      width: 100%;
      max-width: 400px;
      padding: 2.5em 2em;
      position: absolute;
      transform: translate(-50%, -50%);
      top: 50%;
      left: 50%;
      height: 900px;
      font-size: 3vmin;
      border-radius: 10px;
      margin-top: 250px;
    }

    .container.light {
      background-color: #f0f0f0;
      /* Light container color */
    }

    #output-color {
      position: relative;
      height: 30vmin;
      width: 30vmin;
      border: 0.5em solid #f5f5f5;
      border-radius: 50%;
      margin: auto;
      display: grid;
      place-items: center;
    }

    #output-color span {
      display: block;
      width: calc(100% - 20px);
      height: calc(100% - 20px);
      border-radius: 50%;
    }

    .show-color {
      animation: pop 0.8s;
    }

    @keyframes pop {
      0% {
        transform: scale(0);
      }

      100% {
        transform: scale(1);
      }
    }

    input[type="text"] {
      width: 100%;
      background-color: transparent;
      border: 2.5px dashed #f5f5f5;
      font-size: 1.3em;
      padding: 0.8em 0;
      margin: 1em 0;
      border-radius: 8px;
      color: #f5f5f5;
      text-align: center;
    }

    .btns {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
    }

    .btns button {
      font-size: 1em;
      padding: 0.8em 1.7em;
      margin: 0.5em;
      border-radius: 7px;
      font-weight: 600;
      cursor: pointer;
    }

    #gen-btn {
      background-color: #18f98f;
      color: #202229;
    }

    #copy-btn,
    #save-btn,
    #complement-btn,
    #clear-btn {
      border: 3px solid #18f98f;
      background-color: transparent;
      color: #18f98f;
    }

    #toggle-theme {
      border: 3px solid #f5f5f5;
      background-color: transparent;
      color: #f5f5f5;
    }

    .custom-alert {
      background-color: rgba(255, 255, 255, 0.3);
      font-size: 2.5vmin;
      padding: 1em 1.5em;
      position: fixed;
      top: 10px;
      right: 10px;
      color: #f5f5f5;
      transition: 0.5s;
      transform: translateX(calc(100% + 10px));
    }

    .favorite-colors {
      margin-top: 1em;
      text-align: center;
      color: #f5f5f5;
    }

    .favorite-colors span {
      display: inline-block;
      width: 2em;
      height: 2em;
      margin: 0.2em;
      border: 2px solid #f5f5f5;
      cursor: pointer;
    }

    .color-info {
      text-align: center;
      color: #f5f5f5;
      margin-top: 1em;
    }
  </style>
</head>

<body style="background-color: #000000;">
  <div class="container">
    <div id="output-color">
      <span></span>
    </div>
    <input type="text" id="output" placeholder="Enter Hex Code">
    <div class="btns">
      <button id="gen-btn">Generate</button>
      <button id="copy-btn">Copy</button>
      <button id="save-btn">Save</button>
      <button id="complement-btn">Complementary</button>
      <button id="clear-btn">Clear Saved Colors</button>
    </div>
    <div class="btns">
      <button id="toggle-theme">Toggle Theme</button>
    </div>
    <div class="favorite-colors" id="favorite-colors"></div>
    <div class="color-info" id="color-info">
      <p>RGB: <span id="rgb-output"></span></p>
      <p>HSL: <span id="hsl-output"></span></p>
    </div>
  </div>
  <div class="custom-alert">Hex Code Copied</div>
  <!-- Script -->
  <script>
    let outputColor = document.querySelector("#output-color span");
    let output = document.getElementById("output");
    let genBtn = document.getElementById("gen-btn");
    let copyBtn = document.getElementById("copy-btn");
    let saveBtn = document.getElementById("save-btn");
    let complementBtn = document.getElementById("complement-btn");
    let clearBtn = document.getElementById("clear-btn");
    let customAlert = document.querySelector(".custom-alert");
    let favoriteColors = document.getElementById("favorite-colors");
    let rgbOutput = document.getElementById("rgb-output");
    let hslOutput = document.getElementById("hsl-output");
    let toggleThemeBtn = document.getElementById("toggle-theme");
    let body = document.body;

    let hexString = "0123456789abcdef";

    const genHexCode = () => {
      let hexCode = "#";
      for (let i = 0; i < 6; i++) {
        hexCode += hexString[Math.floor(Math.random() * hexString.length)];
      }
      updateColor(hexCode);
    };

    const updateColor = (hexCode) => {
      if (isValidHex(hexCode)) {
        output.value = hexCode;
        body.style.backgroundColor = hexCode;
        outputColor.classList.remove("show-color");
        setTimeout(() => {
          outputColor.classList.add("show-color");
        }, 10);
        outputColor.style.backgroundColor = hexCode;
        rgbOutput.innerText = hexToRgb(hexCode);
        hslOutput.innerText = hexToHsl(hexCode);
      } else {
        alert("Invalid Hex Code");
      }
    };

    const hexToRgb = (hex) => {
      let r = parseInt(hex.slice(1, 3), 16);
      let g = parseInt(hex.slice(3, 5), 16);
      let b = parseInt(hex.slice(5, 7), 16);
      return `rgb(${r}, ${g}, ${b})`;
    };

    const hexToHsl = (hex) => {
      let r = parseInt(hex.slice(1, 3), 16) / 255;
      let g = parseInt(hex.slice(3, 5), 16) / 255;
      let b = parseInt(hex.slice(5, 7), 16) / 255;

      let max = Math.max(r, g, b);
      let min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0; // achromatic
      } else {
        let d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r:
            h = (g - b) / d + (g < b ? 6 : 0);
            break;
          case g:
            h = (b - r) / d + 2;
            break;
          case b:
            h = (r - g) / d + 4;
            break;
        }
        h /= 6;
      }
      return `hsl(${Math.round(h * 360)}, ${Math.round(s * 100)}%, ${Math.round(l * 100)}%)`;
    };

    const isValidHex = (hex) => {
      return /^#[0-9A-F]{6}$/i.test(hex);
    };

    const toggleTheme = () => {
      if (body.classList.contains("light")) {
        body.classList.remove("light");
        body.style.backgroundColor = "#000000";
        toggleThemeBtn.style.color = "#f5f5f5";
        toggleThemeBtn.style.borderColor = "#f5f5f5";
      } else {
        body.classList.add("light");
        body.style.backgroundColor = "#ffffff";
        toggleThemeBtn.style.color = "#121317";
        toggleThemeBtn.style.borderColor = "#121317";
      }
    };

    genBtn.addEventListener("click", genHexCode);
    copyBtn.addEventListener("click", () => {
      navigator.clipboard.writeText(output.value);
      customAlert.style.transform = "translateX(0)";
      setTimeout(() => {
        customAlert.style.transform = "translateX(calc(100% + 10px))";
      }, 2000);
    });

    saveBtn.addEventListener("click", () => {
      let colorDiv = document.createElement("span");
      colorDiv.style.backgroundColor = output.value;
      colorDiv.classList.add("color-saved");
      favoriteColors.appendChild(colorDiv);
    });

    complementBtn.addEventListener("click", () => {
      let hexCode = output.value;
      let compHexCode = `#${(0xFFFFFF ^ parseInt(hexCode.slice(1), 16)).toString(16).padStart(6, '0')}`;
      updateColor(compHexCode);
    });

    clearBtn.addEventListener("click", () => {
      favoriteColors.innerHTML = '';
    });

    toggleThemeBtn.addEventListener("click", toggleTheme);
  </script>
</body>

</html>