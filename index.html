<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>body {
        background-color: #f8f9fa;
    }
    
    #paragraphDisplay {
        background-color: white;
        font-size: 16px;
    }
    
    #userInput {
        resize: none;
    }
    
    #result {
        font-weight: bold;
    }
    
    .correct {
        color: green;
    }
    
    .incorrect {
        color: red;
        text-decoration: underline;
    }</style>
</head>
<body>
    <div class="container mt-5">
        <h1>Typing Speed Test</h1>
        <div id="paragraphDisplay" class="border p-3 mb-3"></div>
        <textarea id="userInput" class="form-control" rows="5" placeholder="Start typing here..."></textarea>
        <button id="startTest" class="btn btn-primary mt-3">Start Test</button>
        <div id="result" class="mt-3"></div>
        <div id="timer" class="mt-3">Time: <span id="time">60</span>s</div>
    </div>

    <script>// Array of paragraphs for the test
        const paragraphs = [
            "The quick brown fox jumps over the lazy dog. This sentence is often used to test typing speed because it contains every letter of the alphabet.",
            "In the middle of difficulty lies opportunity. Albert Einstein's words encourage us to find solutions where others see only problems.",
            "Coding is not just about understanding how to make things work, but also about creating with imagination and precision."
        ];
        
        document.getElementById('startTest').addEventListener('click', startTest);
        
        let startTime, endTime, timerInterval;
        
        function startTest() {
            document.getElementById('userInput').value = '';
            document.getElementById('result').innerText = '';
            document.getElementById('time').innerText = '60';
            let paragraph = paragraphs[Math.floor(Math.random() * paragraphs.length)];
            document.getElementById('paragraphDisplay').innerText = paragraph;
            document.getElementById('userInput').disabled = false;
            document.getElementById('userInput').focus();
        
            // Reset timer
            clearInterval(timerInterval);
            startTime = new Date();
            timerInterval = setInterval(updateTime, 1000);
        }
        
        function updateTime() {
            let currentTime = new Date();
            let timePassed = Math.floor((currentTime - startTime) / 1000);
            let timeLeft = 60 - timePassed;
            if (timeLeft >= 0) {
                document.getElementById('time').innerText = timeLeft;
            } else {
                clearInterval(timerInterval);
                document.getElementById('userInput').disabled = true;
                endTest();
            }
        }
        
        function endTest() {
            endTime = new Date();
            let timeTaken = (endTime - startTime) / 1000;
            let originalText = document.getElementById('paragraphDisplay').innerText;
            let typedText = document.getElementById('userInput').value;
            let words = typedText.split(' ').length;
            let wpm = (words / timeTaken) * 60;
            
            // Calculate accuracy
            let accuracy = calculateAccuracy(originalText, typedText);
        
            document.getElementById('result').innerHTML = `WPM: ${Math.round(wpm)}<br>Accuracy: ${Math.round(accuracy * 100)}%`;
        }
        
        function calculateAccuracy(original, typed) {
            let oWords = original.split(' ');
            let tWords = typed.split(' ');
            let correct = 0;
        
            for (let i = 0; i < Math.min(oWords.length, tWords.length); i++) {
                if (oWords[i] === tWords[i]) correct++;
            }
        
            return oWords.length ? correct / oWords.length : 1;
        }
        
        // Initial disable
        document.getElementById('userInput').disabled = true;</script>
</body>
</html>