<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Speed Typing Game</title>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
<style>
    body { 
        font-family: 'Arial', sans-serif; 
        background: #f4f4f9; 
    }
    .game-container {
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
        background: white;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    #wordDisplay {
        font-size: 2em;
        text-align: center;
        margin: 20px 0;
    }
    #userInput {
        text-align: center;
    }
    #score, #timer {
        font-weight: bold;
    }
    .settings-btn {
        margin-bottom: 10px;
    }
</style>
</head>
<body>

<div class="game-container">
    <h1 class="text-center">Speed Typing Game</h1>
    <button class="btn btn-secondary settings-btn" onclick="toggleSettings()">Settings</button>
    <div id="settings" style="display:none;">
        <select id="difficulty">
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
        </select>
    </div>
    <div id="wordDisplay"></div>
    <input type="text" id="userInput" class="form-control" oninput="checkWord()" autofocus>
    <p>Time: <span id="timer">60</span>s</p>
    <p>Score: <span id="score">0</span></p>
    <div id="gameOver" style="display:none;">
        <h2>Game Over!</h2>
        <p>WPM: <span id="wpm"></span></p>
        <p>Accuracy: <span id="accuracy"></span>%</p>
    </div>
</div>

<script>
    const words = {
        easy: ['cat', 'dog', 'sun', 'run', 'fun'],
        medium: ['jacket', 'zephyr', 'quagmire', 'xylophone'],
        hard: ['antidisestablishmentarianism', 'pneumonoultramicroscopicsilicovolcanoconiosis']
    };
    let currentWord = '';
    let score = 0;
    let timeLeft = 60;
    let timer;
    let totalWordsTyped = 0;
    let correctWords = 0;
    let difficulty = 'medium';

    function startGame() {
        document.getElementById('userInput').value = '';
        pickWord();
        if (!timer) {
            timer = setInterval(updateTimer, 1000);
        }
    }

    function pickWord() {
        const list = words[difficulty];
        currentWord = list[Math.floor(Math.random() * list.length)];
        document.getElementById('wordDisplay').textContent = currentWord;
    }

    function checkWord() {
        const input = document.getElementById('userInput').value;
        if (input === currentWord) {
            document.getElementById('userInput').value = '';
            score++;
            document.getElementById('score').textContent = score;
            const timeAdd = {easy: 5, medium: 3, hard: 1}[difficulty];
            timeLeft += timeAdd;
            pickWord();
            correctWords++;
        }
        totalWordsTyped++;
    }

    function updateTimer() {
        timeLeft--;
        if (timeLeft <= 0) {
            clearInterval(timer);
            endGame();
        } else {
            document.getElementById('timer').textContent = timeLeft;
        }
    }

    function endGame() {
        const wpm = ((correctWords / (60 - timeLeft)) * 60).toFixed(2);
        const accuracy = ((correctWords / totalWordsTyped) * 100).toFixed(2);
        document.getElementById('wpm').textContent = wpm;
        document.getElementById('accuracy').textContent = accuracy;
        document.getElementById('gameOver').style.display = 'block';
        document.getElementById('userInput').disabled = true;
    }

    function toggleSettings() {
        const settings = document.getElementById('settings');
        settings.style.display = settings.style.display === 'none' ? 'block' : 'none';
    }

    document.getElementById('difficulty').addEventListener('change', function(e) {
        difficulty = e.target.value;
        startGame();
    });

    startGame();
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>