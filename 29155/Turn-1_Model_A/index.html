<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Archery Game</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
        }
        #gameArea {
            width: 100vw;
            height: 100vh;
            background: #f0f0f0;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
</head>
<body>
    <svg id="gameArea" viewBox="0 0 800 400">
        <!-- Target -->
        <circle id="target" cx="750" cy="200" r="30" fill="red" />
        
        <!-- Bow String -->
        <path id="bowString" d="M100,200 Q100,100 150,200 T100,200" fill="none" stroke="brown" stroke-width="2" />
        
        <!-- Arrow -->
        <g id="arrowGroup" visibility="hidden">
            <line id="arrow" x1="100" y1="200" x2="150" y2="200" stroke="black" stroke-width="3"/>
            <polygon points="150,197 150,203 155,200" fill="black"/>
        </g>
    </svg>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const svg = document.getElementById('gameArea');
        const arrow = document.getElementById('arrow');
        const arrowGroup = document.getElementById('arrowGroup');
        const bowString = document.getElementById('bowString');
        const target = document.getElementById('target');

        let isDragging = false;
        let startX, startY, currentX, currentY;

        // Mouse down event to start drawing the bow
        svg.addEventListener('mousedown', function(e) {
            isDragging = true;
            startX = e.clientX;
            startY = e.clientY;
            arrowGroup.setAttribute('visibility', 'visible');
        });

        // Mouse move to draw back the arrow
        svg.addEventListener('mousemove', function(e) {
            if (!isDragging) return;
            currentX = e.clientX;
            currentY = e.clientY;
            
            // Update arrow position and bow string
            let distance = Math.min(Math.sqrt((startX - currentX)**2 + (startY - currentY)**2), 100); // Limit max pull
            gsap.set(arrow, {attr:{x2:startX - distance, y2:startY}});
            gsap.set(bowString, {
                attr:{d:`M100,200 Q100,${200 - distance/2} ${startX - distance},${startY} T100,200`}
            });
        });

        // Mouse up event to release the arrow
        svg.addEventListener('mouseup', function(e) {
            if (!isDragging) return;
            isDragging = false;
            
            // Calculate trajectory
            let endX = 750, endY = 200; // Target position
            let velocity = 0.05 * Math.sqrt((startX - currentX)**2 + (startY - currentY)**2);
            let angle = Math.atan2(endY - startY, endX - startX);

            // Animation for arrow flight
            gsap.to(arrowGroup, {
                duration: velocity,
                x: endX - currentX,
                y: endY - startY,
                rotation: angle * (180/Math.PI),
                ease: "none",
                onComplete: function() {
                    arrowGroup.setAttribute('visibility', 'hidden');
                    // Here you could add logic for hit detection or scoring
                }
            });

            // Reset bow string
            gsap.to(bowString, {attr:{d:"M100,200 Q100,100 150,200 T100,200"}, duration: 0.5, ease:"elastic.out(1, 0.3)"});
        });
    });
    </script>
</body>
</html>
